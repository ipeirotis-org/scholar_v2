<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ author.get('name', 'N/A') }} -- Age-normalized Google Scholar Analysis</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.7.2/font/bootstrap-icons.css">
    <script src="{{url_for('static', filename='tablesort.js')}}"></script>
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
</head>
<body>

    <section id="results">
        
                    <section>
                        <h2>Author: {{ author.get('name', 'N/A') }}</h2>
                        <div class="author-details">
                        <ul>
                            <li>Author Name: {{ author.get('name', 'N/A') }}</li>
                            <li>Current Affiliation: {{ author.get('affiliation', 'N/A') }}</li>
                            <li>Google Scholar ID: {{ author.get('scholar_id', 'N/A') }}</li>
                            <li>Total Citations: {{ author.get('citedby', 'N/A') }}</li>
                            <li>H-index: {{ author.get('hindex', 'N/A') }}</li>
                            <li>First Year Active: {{ author.stats.first_year_active }} ({{ author.stats.years_active }} years active)</li>
                            <li>Total Publications: {{ author.stats.total_publications }}
                                ({{ author.stats.total_publications_percentile }}% percentile)&nbsp;<i class="bi bi-question-circle-fill" data-toggle="tooltip" title="The total number of publications by the author and their percentile rank compared to other authors who have been active for the same number of years."></i>
                            </li>
                            <li>
                                <strong>
                                PiP-AUC Score: {{ author.stats.pip_auc }} 
                                ({{ 100*author.stats.pip_auc_percentile }}% percentile)
                                </strong>&nbsp;<i class="bi bi-question-circle-fill" data-toggle="tooltip" title="PiP-AUC Score represents the author's impact and productivity, with its percentile indicating the rank compared to other authors."></i>
                            </li>
                        </ul>
                        </div>

                        {% for path in author.plot_paths %}
                            <img class="plot" src="{{ path }}" alt="Generated Plot">
                        {% endfor %}

                        <center>
                        <a href="{{ url_for('download_results', author_id=author.get('scholar_id', 'N/A')) }}">
                            Download CSV for {{ author.get('name', 'N/A') }}
                        </a>
                        </center>
                        
                        <table id="resultsTable" class="table table-striped table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th onclick="sortTable(0, 'resultsTable')" class="sortable">Title</th>
                                    <th onclick="sortTable(1, 'resultsTable', true)" class="sortable">Year of Publication</th>
                                    <th onclick="sortTable(2, 'resultsTable', true)" class="sortable">Citations</th>
                                    <th onclick="sortTable(3, 'resultsTable', true)" class="sortable">Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in author.publications %}
                                    <tr>
                                        <td>
                                            {{ item.title }}<br><i>{{ item.citation }}</i><br>
                                            <!-- Add link to publication details page -->
                                            <!-- a href="{{ url_for('get_publication_details', author_id=author.get('scholar_id'), pub_id=item.pub_id) }}">View Details</a -->
                                        </td>
                                        <td>{{ item.pub_year }}</td>
                                        <td>{{ item.num_citations }}</td>
                                        <td>{{ item.percentile_score }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                    </section>


    </section>

    <footer>
       <p>
           <a href="https://github.com/ipeirotis-org/scholar_v2">Code</a> 
           and <a href="https://arxiv.org/abs/2103.16025">Paper</a>. 
           For any issues, please contact <a href="mailto:panos@nyu.edu">Panos Ipeirotis</a>. 
       </p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function(){
            $('[data-toggle="tooltip"]').tooltip(); 
        });
    </script>
</body>
</html>




